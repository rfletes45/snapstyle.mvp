import type { FishDefinition, Rarity, ZoneId } from "../game/types";

const REQUIRED_RARITY_COUNTS: Record<Rarity, number> = {
  common: 6,
  uncommon: 4,
  rare: 2,
  epic: 1,
  mythic: 2,
};

const BEACH_ZONE = "beach" as const;
const RIVER_ZONE = "river" as const;
const CAVE_ZONE = "cave" as const;
const VOLCANO_ZONE = "volcano" as const;
const OASIS_ZONE = "oasis" as const;

export const BEACH_FISH: FishDefinition[] = [
  {
    id: "beach_clown_sprout",
    name: "Clown Sprout",
    zone: BEACH_ZONE,
    rarity: "common",
    sellPrice: 10,
    catchTimeSeconds: 4.6,
    targetWidth: 0.3,
    targetBaseSpeed: 0.18,
    targetErraticness: 0.55,
    encounterWeight: 1,
    flavor: "A tiny reef visitor that follows bright colors.",
  },
  {
    id: "beach_shellback_goby",
    name: "Shellback Goby",
    zone: BEACH_ZONE,
    rarity: "common",
    sellPrice: 11,
    catchTimeSeconds: 4.8,
    targetWidth: 0.3,
    targetBaseSpeed: 0.19,
    targetErraticness: 0.58,
    encounterWeight: 1,
    flavor: "Likes hiding under driftwood and shiny shells.",
  },
  {
    id: "beach_sunstripe_tetra",
    name: "Sunstripe Tetra",
    zone: BEACH_ZONE,
    rarity: "common",
    sellPrice: 12,
    catchTimeSeconds: 5.1,
    targetWidth: 0.29,
    targetBaseSpeed: 0.2,
    targetErraticness: 0.62,
    encounterWeight: 1,
    flavor: "Its stripes brighten at sunrise.",
  },
  {
    id: "beach_puddle_puffer",
    name: "Puddle Puffer",
    zone: BEACH_ZONE,
    rarity: "common",
    sellPrice: 14,
    catchTimeSeconds: 5.3,
    targetWidth: 0.28,
    targetBaseSpeed: 0.21,
    targetErraticness: 0.65,
    encounterWeight: 1,
    flavor: "Gentle and curious until startled.",
  },
  {
    id: "beach_coral_nibbler",
    name: "Coral Nibbler",
    zone: BEACH_ZONE,
    rarity: "common",
    sellPrice: 16,
    catchTimeSeconds: 5.6,
    targetWidth: 0.27,
    targetBaseSpeed: 0.22,
    targetErraticness: 0.68,
    encounterWeight: 1,
    flavor: "Leaves tiny bite marks on dead coral.",
  },
  {
    id: "beach_tide_skipper",
    name: "Tide Skipper",
    zone: BEACH_ZONE,
    rarity: "common",
    sellPrice: 18,
    catchTimeSeconds: 6,
    targetWidth: 0.26,
    targetBaseSpeed: 0.23,
    targetErraticness: 0.72,
    encounterWeight: 1,
    flavor: "Hops in and out of foam at low tide.",
  },
  {
    id: "beach_palmfin_darter",
    name: "Palmfin Darter",
    zone: BEACH_ZONE,
    rarity: "uncommon",
    sellPrice: 26,
    catchTimeSeconds: 6.4,
    targetWidth: 0.24,
    targetBaseSpeed: 0.26,
    targetErraticness: 0.86,
    encounterWeight: 1,
    flavor: "Quick bursts, then sudden stillness.",
  },
  {
    id: "beach_reef_snapperlet",
    name: "Reef Snapperlet",
    zone: BEACH_ZONE,
    rarity: "uncommon",
    sellPrice: 30,
    catchTimeSeconds: 6.8,
    targetWidth: 0.23,
    targetBaseSpeed: 0.28,
    targetErraticness: 0.95,
    encounterWeight: 1,
    flavor: "A small but feisty reef hunter.",
  },
  {
    id: "beach_glimmer_wrasse",
    name: "Glimmer Wrasse",
    zone: BEACH_ZONE,
    rarity: "uncommon",
    sellPrice: 35,
    catchTimeSeconds: 7.3,
    targetWidth: 0.22,
    targetBaseSpeed: 0.29,
    targetErraticness: 1.02,
    encounterWeight: 1,
    flavor: "Scales flash like tiny mirrors.",
  },
  {
    id: "beach_sandbar_basslet",
    name: "Sandbar Basslet",
    zone: BEACH_ZONE,
    rarity: "uncommon",
    sellPrice: 40,
    catchTimeSeconds: 7.9,
    targetWidth: 0.21,
    targetBaseSpeed: 0.3,
    targetErraticness: 1.1,
    encounterWeight: 1,
    flavor: "Patrols shallow bars in tight circles.",
  },
  {
    id: "beach_prism_koi",
    name: "Prism Koi",
    zone: BEACH_ZONE,
    rarity: "rare",
    sellPrice: 82,
    catchTimeSeconds: 8.8,
    targetWidth: 0.18,
    targetBaseSpeed: 0.34,
    targetErraticness: 1.24,
    encounterWeight: 1,
    flavor: "Its fins split sunlight into rainbow streaks.",
  },
  {
    id: "beach_moonfin_angel",
    name: "Moonfin Angel",
    zone: BEACH_ZONE,
    rarity: "rare",
    sellPrice: 116,
    catchTimeSeconds: 10,
    targetWidth: 0.17,
    targetBaseSpeed: 0.36,
    targetErraticness: 1.35,
    encounterWeight: 1,
    flavor: "Seen gliding under moonlit surf.",
  },
  {
    id: "beach_starburst_marlin",
    name: "Starburst Marlin",
    zone: BEACH_ZONE,
    rarity: "epic",
    sellPrice: 250,
    catchTimeSeconds: 11.2,
    targetWidth: 0.15,
    targetBaseSpeed: 0.39,
    targetErraticness: 1.5,
    encounterWeight: 1,
    flavor: "Bursts forward like a comet.",
  },
  {
    id: "beach_aurora_eel",
    name: "Aurora Eel",
    zone: BEACH_ZONE,
    rarity: "mythic",
    sellPrice: 610,
    catchTimeSeconds: 14.3,
    targetWidth: 0.11,
    targetBaseSpeed: 0.49,
    targetErraticness: 1.96,
    encounterWeight: 1,
    flavor: "Leaves a shimmering trail at dusk.",
  },
  {
    id: "beach_poseidon_parrotfish",
    name: "Poseidon Parrotfish",
    zone: BEACH_ZONE,
    rarity: "mythic",
    sellPrice: 790,
    catchTimeSeconds: 15,
    targetWidth: 0.1,
    targetBaseSpeed: 0.52,
    targetErraticness: 2.12,
    encounterWeight: 1,
    flavor: "Said to guard treasures beneath the pier.",
  },
];

export const RIVER_FISH: FishDefinition[] = [
  {
    id: "river_pebble_darter",
    name: "Pebble Darter",
    zone: RIVER_ZONE,
    rarity: "common",
    sellPrice: 12,
    catchTimeSeconds: 4.7,
    targetWidth: 0.29,
    targetBaseSpeed: 0.2,
    targetErraticness: 0.58,
    encounterWeight: 1,
    flavor: "Skims over smooth stones in shallow flow.",
  },
  {
    id: "river_reed_guppy",
    name: "Reed Guppy",
    zone: RIVER_ZONE,
    rarity: "common",
    sellPrice: 13,
    catchTimeSeconds: 5,
    targetWidth: 0.29,
    targetBaseSpeed: 0.21,
    targetErraticness: 0.62,
    encounterWeight: 1,
    flavor: "Hides in reed clusters and darts in pairs.",
  },
  {
    id: "river_bluefin_minnow",
    name: "Bluefin Minnow",
    zone: RIVER_ZONE,
    rarity: "common",
    sellPrice: 15,
    catchTimeSeconds: 5.2,
    targetWidth: 0.28,
    targetBaseSpeed: 0.22,
    targetErraticness: 0.66,
    encounterWeight: 1,
    flavor: "Tiny blue flashes near shaded banks.",
  },
  {
    id: "river_mossy_carp",
    name: "Mossy Carp",
    zone: RIVER_ZONE,
    rarity: "common",
    sellPrice: 16,
    catchTimeSeconds: 5.5,
    targetWidth: 0.27,
    targetBaseSpeed: 0.23,
    targetErraticness: 0.71,
    encounterWeight: 1,
    flavor: "Gentle grazer with mossy green scales.",
  },
  {
    id: "river_splash_tetra",
    name: "Splash Tetra",
    zone: RIVER_ZONE,
    rarity: "common",
    sellPrice: 17,
    catchTimeSeconds: 5.8,
    targetWidth: 0.26,
    targetBaseSpeed: 0.24,
    targetErraticness: 0.76,
    encounterWeight: 1,
    flavor: "Leaps at droplets near the river bend.",
  },
  {
    id: "river_skipping_shiner",
    name: "Skipping Shiner",
    zone: RIVER_ZONE,
    rarity: "common",
    sellPrice: 18,
    catchTimeSeconds: 6.2,
    targetWidth: 0.25,
    targetBaseSpeed: 0.25,
    targetErraticness: 0.81,
    encounterWeight: 1,
    flavor: "Likes hopping across current seams.",
  },
  {
    id: "river_lantern_koi",
    name: "Lantern Koi",
    zone: RIVER_ZONE,
    rarity: "uncommon",
    sellPrice: 28,
    catchTimeSeconds: 6.7,
    targetWidth: 0.23,
    targetBaseSpeed: 0.28,
    targetErraticness: 0.95,
    encounterWeight: 1,
    flavor: "Its belly glows in murky pools.",
  },
  {
    id: "river_ripple_catlet",
    name: "Ripple Catlet",
    zone: RIVER_ZONE,
    rarity: "uncommon",
    sellPrice: 33,
    catchTimeSeconds: 7.1,
    targetWidth: 0.22,
    targetBaseSpeed: 0.3,
    targetErraticness: 1.03,
    encounterWeight: 1,
    flavor: "Whiskers sense every tiny vibration.",
  },
  {
    id: "river_fernfin_trout",
    name: "Fernfin Trout",
    zone: RIVER_ZONE,
    rarity: "uncommon",
    sellPrice: 37,
    catchTimeSeconds: 7.6,
    targetWidth: 0.21,
    targetBaseSpeed: 0.31,
    targetErraticness: 1.11,
    encounterWeight: 1,
    flavor: "Darts through fern shadows.",
  },
  {
    id: "river_stoneback_perch",
    name: "Stoneback Perch",
    zone: RIVER_ZONE,
    rarity: "uncommon",
    sellPrice: 40,
    catchTimeSeconds: 8.2,
    targetWidth: 0.2,
    targetBaseSpeed: 0.33,
    targetErraticness: 1.2,
    encounterWeight: 1,
    flavor: "Stays low near boulder shelves.",
  },
  {
    id: "river_glassscale_pike",
    name: "Glassscale Pike",
    zone: RIVER_ZONE,
    rarity: "rare",
    sellPrice: 88,
    catchTimeSeconds: 9.2,
    targetWidth: 0.17,
    targetBaseSpeed: 0.36,
    targetErraticness: 1.34,
    encounterWeight: 1,
    flavor: "Nearly invisible when still.",
  },
  {
    id: "river_moonpetal_koi",
    name: "Moonpetal Koi",
    zone: RIVER_ZONE,
    rarity: "rare",
    sellPrice: 118,
    catchTimeSeconds: 10.4,
    targetWidth: 0.16,
    targetBaseSpeed: 0.38,
    targetErraticness: 1.46,
    encounterWeight: 1,
    flavor: "Fins bloom like silver petals at night.",
  },
  {
    id: "river_thunder_sturgeon",
    name: "Thunder Sturgeon",
    zone: RIVER_ZONE,
    rarity: "epic",
    sellPrice: 260,
    catchTimeSeconds: 11.8,
    targetWidth: 0.14,
    targetBaseSpeed: 0.41,
    targetErraticness: 1.6,
    encounterWeight: 1,
    flavor: "You hear it before you see it.",
  },
  {
    id: "river_spirit_salamanderfish",
    name: "Spirit Salamanderfish",
    zone: RIVER_ZONE,
    rarity: "mythic",
    sellPrice: 640,
    catchTimeSeconds: 14.4,
    targetWidth: 0.11,
    targetBaseSpeed: 0.5,
    targetErraticness: 2.01,
    encounterWeight: 1,
    flavor: "Mist follows it like a wandering spirit.",
  },
  {
    id: "river_ancient_riverwyrm",
    name: "Ancient Riverwyrm",
    zone: RIVER_ZONE,
    rarity: "mythic",
    sellPrice: 800,
    catchTimeSeconds: 15,
    targetWidth: 0.1,
    targetBaseSpeed: 0.53,
    targetErraticness: 2.18,
    encounterWeight: 1,
    flavor: "A myth older than the bridge itself.",
  },
];

export const CAVE_FISH: FishDefinition[] = [
  {
    id: "cave_glow_guppy",
    name: "Glow Guppy",
    zone: CAVE_ZONE,
    rarity: "common",
    sellPrice: 14,
    catchTimeSeconds: 5.2,
    targetWidth: 0.28,
    targetBaseSpeed: 0.23,
    targetErraticness: 0.66,
    encounterWeight: 1,
    flavor: "A tiny glow tail flickers in shallow cave pools.",
  },
  {
    id: "cave_pebble_puffer",
    name: "Pebble Puffer",
    zone: CAVE_ZONE,
    rarity: "common",
    sellPrice: 15,
    catchTimeSeconds: 5.5,
    targetWidth: 0.27,
    targetBaseSpeed: 0.24,
    targetErraticness: 0.7,
    encounterWeight: 1,
    flavor: "Inflates when startled by falling droplets.",
  },
  {
    id: "cave_lantern_minnow",
    name: "Lantern Minnow",
    zone: CAVE_ZONE,
    rarity: "common",
    sellPrice: 16,
    catchTimeSeconds: 5.8,
    targetWidth: 0.26,
    targetBaseSpeed: 0.25,
    targetErraticness: 0.75,
    encounterWeight: 1,
    flavor: "Its fins pulse like tiny cave lanterns.",
  },
  {
    id: "cave_dusty_carp",
    name: "Dusty Carp",
    zone: CAVE_ZONE,
    rarity: "common",
    sellPrice: 17,
    catchTimeSeconds: 6.1,
    targetWidth: 0.25,
    targetBaseSpeed: 0.26,
    targetErraticness: 0.8,
    encounterWeight: 1,
    flavor: "Sifts glowing sediment for snacks.",
  },
  {
    id: "cave_mushroom_tetra",
    name: "Mushroom Tetra",
    zone: CAVE_ZONE,
    rarity: "common",
    sellPrice: 18,
    catchTimeSeconds: 6.4,
    targetWidth: 0.24,
    targetBaseSpeed: 0.27,
    targetErraticness: 0.85,
    encounterWeight: 1,
    flavor: "Loves the warm glow near fungus clusters.",
  },
  {
    id: "cave_dripfin_darter",
    name: "Dripfin Darter",
    zone: CAVE_ZONE,
    rarity: "common",
    sellPrice: 19,
    catchTimeSeconds: 6.8,
    targetWidth: 0.23,
    targetBaseSpeed: 0.28,
    targetErraticness: 0.9,
    encounterWeight: 1,
    flavor: "Skips between drip rings with quick bursts.",
  },
  {
    id: "cave_crystal_koi",
    name: "Crystal Koi",
    zone: CAVE_ZONE,
    rarity: "uncommon",
    sellPrice: 30,
    catchTimeSeconds: 7.2,
    targetWidth: 0.21,
    targetBaseSpeed: 0.3,
    targetErraticness: 1.02,
    encounterWeight: 1,
    flavor: "Its scales reflect broken cave light.",
  },
  {
    id: "cave_fungus_catlet",
    name: "Fungus Catlet",
    zone: CAVE_ZONE,
    rarity: "uncommon",
    sellPrice: 34,
    catchTimeSeconds: 7.6,
    targetWidth: 0.2,
    targetBaseSpeed: 0.32,
    targetErraticness: 1.1,
    encounterWeight: 1,
    flavor: "Whiskers trail through glowing spores.",
  },
  {
    id: "cave_echo_trout",
    name: "Echo Trout",
    zone: CAVE_ZONE,
    rarity: "uncommon",
    sellPrice: 38,
    catchTimeSeconds: 8.1,
    targetWidth: 0.19,
    targetBaseSpeed: 0.34,
    targetErraticness: 1.18,
    encounterWeight: 1,
    flavor: "Turns as if listening to distant echoes.",
  },
  {
    id: "cave_shimmer_perch",
    name: "Shimmer Perch",
    zone: CAVE_ZONE,
    rarity: "uncommon",
    sellPrice: 42,
    catchTimeSeconds: 8.6,
    targetWidth: 0.18,
    targetBaseSpeed: 0.35,
    targetErraticness: 1.26,
    encounterWeight: 1,
    flavor: "Hovers in glowing pockets of the lake.",
  },
  {
    id: "cave_glassjaw_eel",
    name: "Glassjaw Eel",
    zone: CAVE_ZONE,
    rarity: "rare",
    sellPrice: 96,
    catchTimeSeconds: 9.8,
    targetWidth: 0.16,
    targetBaseSpeed: 0.39,
    targetErraticness: 1.42,
    encounterWeight: 1,
    flavor: "Its translucent jaw flashes under torchlight.",
  },
  {
    id: "cave_prismscale_pike",
    name: "Prismscale Pike",
    zone: CAVE_ZONE,
    rarity: "rare",
    sellPrice: 125,
    catchTimeSeconds: 10.8,
    targetWidth: 0.15,
    targetBaseSpeed: 0.41,
    targetErraticness: 1.55,
    encounterWeight: 1,
    flavor: "Scales split light into rainbow shards.",
  },
  {
    id: "cave_geode_sturgeon",
    name: "Geode Sturgeon",
    zone: CAVE_ZONE,
    rarity: "epic",
    sellPrice: 275,
    catchTimeSeconds: 12.2,
    targetWidth: 0.13,
    targetBaseSpeed: 0.45,
    targetErraticness: 1.72,
    encounterWeight: 1,
    flavor: "A heavy guardian of the deepest pool.",
  },
  {
    id: "cave_starlight_leviathan",
    name: "Starlight Leviathan",
    zone: CAVE_ZONE,
    rarity: "mythic",
    sellPrice: 670,
    catchTimeSeconds: 14.6,
    targetWidth: 0.1,
    targetBaseSpeed: 0.52,
    targetErraticness: 2.12,
    encounterWeight: 1,
    flavor: "The lake seems to dim when it passes.",
  },
  {
    id: "cave_ancient_gemwyrm",
    name: "Ancient Gemwyrm",
    zone: CAVE_ZONE,
    rarity: "mythic",
    sellPrice: 820,
    catchTimeSeconds: 15,
    targetWidth: 0.09,
    targetBaseSpeed: 0.55,
    targetErraticness: 2.26,
    encounterWeight: 1,
    flavor: "An old cave myth given living scales.",
  },
];

export const VOLCANO_FISH: FishDefinition[] = [
  {
    id: "volcano_ember_guppy",
    name: "Ember Guppy",
    zone: VOLCANO_ZONE,
    rarity: "common",
    sellPrice: 18,
    catchTimeSeconds: 5.6,
    targetWidth: 0.26,
    targetBaseSpeed: 0.26,
    targetErraticness: 0.78,
    encounterWeight: 1,
    flavor: "Warms its fins in the shallow spring edge.",
  },
  {
    id: "volcano_ashfin_minnow",
    name: "Ashfin Minnow",
    zone: VOLCANO_ZONE,
    rarity: "common",
    sellPrice: 19,
    catchTimeSeconds: 5.9,
    targetWidth: 0.25,
    targetBaseSpeed: 0.27,
    targetErraticness: 0.83,
    encounterWeight: 1,
    flavor: "Its tiny fins kick up soft ash clouds.",
  },
  {
    id: "volcano_hotstone_carp",
    name: "Hotstone Carp",
    zone: VOLCANO_ZONE,
    rarity: "common",
    sellPrice: 20,
    catchTimeSeconds: 6.2,
    targetWidth: 0.24,
    targetBaseSpeed: 0.28,
    targetErraticness: 0.88,
    encounterWeight: 1,
    flavor: "Loves resting by warm basalt shelves.",
  },
  {
    id: "volcano_sparkle_tetra",
    name: "Sparkle Tetra",
    zone: VOLCANO_ZONE,
    rarity: "common",
    sellPrice: 21,
    catchTimeSeconds: 6.5,
    targetWidth: 0.23,
    targetBaseSpeed: 0.29,
    targetErraticness: 0.93,
    encounterWeight: 1,
    flavor: "Flickers like sparks under steam.",
  },
  {
    id: "volcano_steam_darter",
    name: "Steam Darter",
    zone: VOLCANO_ZONE,
    rarity: "common",
    sellPrice: 22,
    catchTimeSeconds: 6.9,
    targetWidth: 0.22,
    targetBaseSpeed: 0.3,
    targetErraticness: 0.98,
    encounterWeight: 1,
    flavor: "Darts through mist bursts without slowing.",
  },
  {
    id: "volcano_cinder_shiner",
    name: "Cinder Shiner",
    zone: VOLCANO_ZONE,
    rarity: "common",
    sellPrice: 23,
    catchTimeSeconds: 7.2,
    targetWidth: 0.21,
    targetBaseSpeed: 0.31,
    targetErraticness: 1.04,
    encounterWeight: 1,
    flavor: "Leaves ember-like trails in dark pools.",
  },
  {
    id: "volcano_saffron_koi",
    name: "Saffron Koi",
    zone: VOLCANO_ZONE,
    rarity: "uncommon",
    sellPrice: 34,
    catchTimeSeconds: 7.7,
    targetWidth: 0.2,
    targetBaseSpeed: 0.33,
    targetErraticness: 1.12,
    encounterWeight: 1,
    flavor: "Golden fins glow against volcanic rock.",
  },
  {
    id: "volcano_bubblecatlet",
    name: "Bubblecatlet",
    zone: VOLCANO_ZONE,
    rarity: "uncommon",
    sellPrice: 38,
    catchTimeSeconds: 8.1,
    targetWidth: 0.19,
    targetBaseSpeed: 0.34,
    targetErraticness: 1.21,
    encounterWeight: 1,
    flavor: "Whiskers detect every steam bubble.",
  },
  {
    id: "volcano_molten_trout",
    name: "Molten Trout",
    zone: VOLCANO_ZONE,
    rarity: "uncommon",
    sellPrice: 42,
    catchTimeSeconds: 8.6,
    targetWidth: 0.18,
    targetBaseSpeed: 0.36,
    targetErraticness: 1.3,
    encounterWeight: 1,
    flavor: "Fast swimmer from hotter channels.",
  },
  {
    id: "volcano_basalt_perch",
    name: "Basalt Perch",
    zone: VOLCANO_ZONE,
    rarity: "uncommon",
    sellPrice: 46,
    catchTimeSeconds: 9.1,
    targetWidth: 0.17,
    targetBaseSpeed: 0.37,
    targetErraticness: 1.38,
    encounterWeight: 1,
    flavor: "Clings near sharp basalt ledges.",
  },
  {
    id: "volcano_glowjaw_eel",
    name: "Glowjaw Eel",
    zone: VOLCANO_ZONE,
    rarity: "rare",
    sellPrice: 108,
    catchTimeSeconds: 10.1,
    targetWidth: 0.15,
    targetBaseSpeed: 0.41,
    targetErraticness: 1.58,
    encounterWeight: 1,
    flavor: "Its jaw shines bright in dark steam.",
  },
  {
    id: "volcano_obsidian_pike",
    name: "Obsidian Pike",
    zone: VOLCANO_ZONE,
    rarity: "rare",
    sellPrice: 138,
    catchTimeSeconds: 11,
    targetWidth: 0.14,
    targetBaseSpeed: 0.43,
    targetErraticness: 1.72,
    encounterWeight: 1,
    flavor: "A sleek hunter with glass-black scales.",
  },
  {
    id: "volcano_magma_sturgeon",
    name: "Magma Sturgeon",
    zone: VOLCANO_ZONE,
    rarity: "epic",
    sellPrice: 300,
    catchTimeSeconds: 12.4,
    targetWidth: 0.12,
    targetBaseSpeed: 0.47,
    targetErraticness: 1.9,
    encounterWeight: 1,
    flavor: "Rumbles through water like distant thunder.",
  },
  {
    id: "volcano_ancient_lavwyrm",
    name: "Ancient Lavwyrm",
    zone: VOLCANO_ZONE,
    rarity: "mythic",
    sellPrice: 740,
    catchTimeSeconds: 15.1,
    targetWidth: 0.09,
    targetBaseSpeed: 0.56,
    targetErraticness: 2.31,
    encounterWeight: 1,
    flavor: "A deep vent legend with blazing eyes.",
  },
  {
    id: "volcano_phoenix_spiritfish",
    name: "Phoenix Spiritfish",
    zone: VOLCANO_ZONE,
    rarity: "mythic",
    sellPrice: 860,
    catchTimeSeconds: 15.8,
    targetWidth: 0.08,
    targetBaseSpeed: 0.59,
    targetErraticness: 2.45,
    encounterWeight: 1,
    flavor: "Appears only when steam glows orange.",
  },
];

export const OASIS_FISH: FishDefinition[] = [
  {
    id: "oasis_lotus_guppy",
    name: "Lotus Guppy",
    zone: OASIS_ZONE,
    rarity: "common",
    sellPrice: 22,
    catchTimeSeconds: 5.8,
    targetWidth: 0.25,
    targetBaseSpeed: 0.29,
    targetErraticness: 0.86,
    encounterWeight: 1,
    flavor: "Tiny fins ripple beside floating lotus petals.",
  },
  {
    id: "oasis_sandkiss_minnow",
    name: "Sandkiss Minnow",
    zone: OASIS_ZONE,
    rarity: "common",
    sellPrice: 23,
    catchTimeSeconds: 6.1,
    targetWidth: 0.24,
    targetBaseSpeed: 0.3,
    targetErraticness: 0.91,
    encounterWeight: 1,
    flavor: "Skims the sacred pool at sunrise.",
  },
  {
    id: "oasis_palmfin_carp",
    name: "Palmfin Carp",
    zone: OASIS_ZONE,
    rarity: "common",
    sellPrice: 24,
    catchTimeSeconds: 6.4,
    targetWidth: 0.23,
    targetBaseSpeed: 0.31,
    targetErraticness: 0.96,
    encounterWeight: 1,
    flavor: "Calm swimmer with wide palm-like fins.",
  },
  {
    id: "oasis_mirage_tetra",
    name: "Mirage Tetra",
    zone: OASIS_ZONE,
    rarity: "common",
    sellPrice: 25,
    catchTimeSeconds: 6.8,
    targetWidth: 0.22,
    targetBaseSpeed: 0.32,
    targetErraticness: 1.01,
    encounterWeight: 1,
    flavor: "Seems to flicker in and out of view.",
  },
  {
    id: "oasis_pearl_darter",
    name: "Pearl Darter",
    zone: OASIS_ZONE,
    rarity: "common",
    sellPrice: 26,
    catchTimeSeconds: 7.1,
    targetWidth: 0.21,
    targetBaseSpeed: 0.33,
    targetErraticness: 1.06,
    encounterWeight: 1,
    flavor: "Its scales gleam like tiny pearls.",
  },
  {
    id: "oasis_sunpool_shiner",
    name: "Sunpool Shiner",
    zone: OASIS_ZONE,
    rarity: "common",
    sellPrice: 27,
    catchTimeSeconds: 7.4,
    targetWidth: 0.2,
    targetBaseSpeed: 0.34,
    targetErraticness: 1.12,
    encounterWeight: 1,
    flavor: "Lives near warm stones of the shrine pool.",
  },
  {
    id: "oasis_ruin_koi",
    name: "Ruin Koi",
    zone: OASIS_ZONE,
    rarity: "uncommon",
    sellPrice: 40,
    catchTimeSeconds: 7.9,
    targetWidth: 0.19,
    targetBaseSpeed: 0.36,
    targetErraticness: 1.2,
    encounterWeight: 1,
    flavor: "Ancient markings shimmer along its back.",
  },
  {
    id: "oasis_gilded_catlet",
    name: "Gilded Catlet",
    zone: OASIS_ZONE,
    rarity: "uncommon",
    sellPrice: 45,
    catchTimeSeconds: 8.4,
    targetWidth: 0.18,
    targetBaseSpeed: 0.38,
    targetErraticness: 1.3,
    encounterWeight: 1,
    flavor: "Golden whiskers sense movement instantly.",
  },
  {
    id: "oasis_leafcrown_trout",
    name: "Leafcrown Trout",
    zone: OASIS_ZONE,
    rarity: "uncommon",
    sellPrice: 49,
    catchTimeSeconds: 8.8,
    targetWidth: 0.17,
    targetBaseSpeed: 0.39,
    targetErraticness: 1.38,
    encounterWeight: 1,
    flavor: "A crown-shaped dorsal fin marks this trout.",
  },
  {
    id: "oasis_stonepetal_perch",
    name: "Stonepetal Perch",
    zone: OASIS_ZONE,
    rarity: "uncommon",
    sellPrice: 54,
    catchTimeSeconds: 9.3,
    targetWidth: 0.16,
    targetBaseSpeed: 0.41,
    targetErraticness: 1.47,
    encounterWeight: 1,
    flavor: "Circles carved ruins in tight petals.",
  },
  {
    id: "oasis_glasslotus_pike",
    name: "Glasslotus Pike",
    zone: OASIS_ZONE,
    rarity: "rare",
    sellPrice: 132,
    catchTimeSeconds: 10.4,
    targetWidth: 0.14,
    targetBaseSpeed: 0.45,
    targetErraticness: 1.66,
    encounterWeight: 1,
    flavor: "Its scales refract like polished lotus glass.",
  },
  {
    id: "oasis_moonlily_eel",
    name: "Moonlily Eel",
    zone: OASIS_ZONE,
    rarity: "rare",
    sellPrice: 165,
    catchTimeSeconds: 11.3,
    targetWidth: 0.13,
    targetBaseSpeed: 0.47,
    targetErraticness: 1.8,
    encounterWeight: 1,
    flavor: "Glides beneath moonlit lily shadows.",
  },
  {
    id: "oasis_temple_sturgeon",
    name: "Temple Sturgeon",
    zone: OASIS_ZONE,
    rarity: "epic",
    sellPrice: 340,
    catchTimeSeconds: 12.9,
    targetWidth: 0.11,
    targetBaseSpeed: 0.51,
    targetErraticness: 2.01,
    encounterWeight: 1,
    flavor: "A quiet guardian of submerged temple steps.",
  },
  {
    id: "oasis_ancient_oasiswyrm",
    name: "Ancient Oasiswyrm",
    zone: OASIS_ZONE,
    rarity: "mythic",
    sellPrice: 820,
    catchTimeSeconds: 15.9,
    targetWidth: 0.08,
    targetBaseSpeed: 0.61,
    targetErraticness: 2.52,
    encounterWeight: 1,
    flavor: "The oldest whisper of the hidden valley.",
  },
  {
    id: "oasis_spirit_of_the_pool",
    name: "Spirit of the Pool",
    zone: OASIS_ZONE,
    rarity: "mythic",
    sellPrice: 940,
    catchTimeSeconds: 16.6,
    targetWidth: 0.07,
    targetBaseSpeed: 0.64,
    targetErraticness: 2.66,
    encounterWeight: 1,
    flavor: "A living blessing that tests the final angler.",
  },
];

export const FISH_BY_ZONE: Record<ZoneId, FishDefinition[]> = {
  beach: BEACH_FISH,
  river: RIVER_FISH,
  cave: CAVE_FISH,
  volcano: VOLCANO_FISH,
  oasis: OASIS_FISH,
};

export const ALL_FISH: FishDefinition[] = [
  ...BEACH_FISH,
  ...RIVER_FISH,
  ...CAVE_FISH,
  ...VOLCANO_FISH,
  ...OASIS_FISH,
];

export const ALL_FISH_BY_ID: Record<string, FishDefinition> =
  Object.fromEntries(ALL_FISH.map((fish) => [fish.id, fish]));

function validateZoneFish(zoneId: ZoneId, fishList: FishDefinition[]): void {
  if (fishList.length !== 15) {
    throw new Error(
      `${zoneId} fish catalog must have exactly 15 fish. Found ${fishList.length}.`,
    );
  }

  const actualCounts: Record<Rarity, number> = {
    common: 0,
    uncommon: 0,
    rare: 0,
    epic: 0,
    mythic: 0,
  };

  for (const fish of fishList) {
    if (fish.zone !== zoneId) {
      throw new Error(
        `Fish ${fish.id} has wrong zone: expected ${zoneId}, got ${fish.zone}.`,
      );
    }
    actualCounts[fish.rarity] += 1;
  }

  for (const rarity of Object.keys(REQUIRED_RARITY_COUNTS) as Rarity[]) {
    if (actualCounts[rarity] !== REQUIRED_RARITY_COUNTS[rarity]) {
      throw new Error(
        `${zoneId} rarity mismatch for ${rarity}. Expected ${REQUIRED_RARITY_COUNTS[rarity]}, got ${actualCounts[rarity]}.`,
      );
    }
  }
}

validateZoneFish("beach", BEACH_FISH);
validateZoneFish("river", RIVER_FISH);
validateZoneFish("cave", CAVE_FISH);
validateZoneFish("volcano", VOLCANO_FISH);
validateZoneFish("oasis", OASIS_FISH);
